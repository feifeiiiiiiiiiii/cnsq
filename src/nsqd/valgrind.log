==2174== Memcheck, a memory error detector
==2174== Copyright (C) 2002-2013, and GNU GPL'd, by Julian Seward et al.
==2174== Using Valgrind-3.10.1 and LibVEX; rerun with -h for copyright info
==2174== Command: ./nsqd.out
==2174== Parent PID: 8
==2174== 
--2174-- 
--2174-- Valgrind options:
--2174--    -v
--2174--    --log-file=valgrind.log
--2174--    --tool=memcheck
--2174--    --leak-check=full
--2174-- Contents of /proc/version:
--2174--   Linux version 4.9.60-linuxkit-aufs (root@4a42478ffb9a) (gcc version 6.3.0 (Alpine 6.3.0) ) #1 SMP Mon Nov 6 16:00:12 UTC 2017
--2174-- Arch and hwcaps: AMD64, LittleEndian, amd64-cx16-lzcnt-sse3-avx-avx2-bmi
--2174-- Page sizes: currently 4096, max supported 4096
--2174-- Valgrind library directory: /usr/lib/valgrind
--2174-- Reading syms from /root/build/src/nsqd/nsqd.out
--2174-- Reading syms from /lib/x86_64-linux-gnu/ld-2.19.so
--2174--   Considering /lib/x86_64-linux-gnu/ld-2.19.so ..
--2174--   .. CRC mismatch (computed c0e20d20 wanted 6a260d6d)
--2174--   Considering /usr/lib/debug/lib/x86_64-linux-gnu/ld-2.19.so ..
--2174--   .. CRC is valid
--2174-- Reading syms from /usr/lib/valgrind/memcheck-amd64-linux
--2174--   Considering /usr/lib/valgrind/memcheck-amd64-linux ..
--2174--   .. CRC mismatch (computed fed8e6c5 wanted e6be554a)
--2174--    object doesn't have a symbol table
--2174--    object doesn't have a dynamic symbol table
--2174-- Scheduler: using generic scheduler lock implementation.
--2174-- Reading suppressions file: /usr/lib/valgrind/default.supp
==2174== embedded gdbserver: reading from /tmp/vgdb-pipe-from-vgdb-to-2174-by-???-on-valgrind
==2174== embedded gdbserver: writing to   /tmp/vgdb-pipe-to-vgdb-from-2174-by-???-on-valgrind
==2174== embedded gdbserver: shared mem   /tmp/vgdb-pipe-shared-mem-vgdb-2174-by-???-on-valgrind
==2174== 
==2174== TO CONTROL THIS PROCESS USING vgdb (which you probably
==2174== don't want to do, unless you know exactly what you're doing,
==2174== or are doing some strange experiment):
==2174==   /usr/lib/valgrind/../../bin/vgdb --pid=2174 ...command...
==2174== 
==2174== TO DEBUG THIS PROCESS USING GDB: start GDB like this
==2174==   /path/to/gdb ./nsqd.out
==2174== and then give GDB the following command
==2174==   target remote | /usr/lib/valgrind/../../bin/vgdb --pid=2174
==2174== --pid is optional if only one valgrind process is running
==2174== 
--2174-- REDIR: 0x4019d70 (ld-linux-x86-64.so.2:strlen) redirected to 0x380764b1 (???)
--2174-- Reading syms from /usr/lib/valgrind/vgpreload_core-amd64-linux.so
--2174--   Considering /usr/lib/valgrind/vgpreload_core-amd64-linux.so ..
--2174--   .. CRC mismatch (computed 4bcdfe99 wanted 3143e841)
--2174--    object doesn't have a symbol table
--2174-- Reading syms from /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so
--2174--   Considering /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so ..
--2174--   .. CRC mismatch (computed 3df18bf1 wanted 14fefe1c)
--2174--    object doesn't have a symbol table
==2174== WARNING: new redirection conflicts with existing -- ignoring it
--2174--     old: 0x04019d70 (strlen              ) R-> (0000.0) 0x380764b1 ???
--2174--     new: 0x04019d70 (strlen              ) R-> (2007.0) 0x04c2e1a0 strlen
--2174-- REDIR: 0x4019b20 (ld-linux-x86-64.so.2:index) redirected to 0x4c2dd50 (index)
--2174-- REDIR: 0x4019d40 (ld-linux-x86-64.so.2:strcmp) redirected to 0x4c2f2f0 (strcmp)
--2174-- REDIR: 0x401aa90 (ld-linux-x86-64.so.2:mempcpy) redirected to 0x4c31da0 (mempcpy)
--2174-- Reading syms from /lib/x86_64-linux-gnu/libc-2.19.so
--2174--   Considering /lib/x86_64-linux-gnu/libc-2.19.so ..
--2174--   .. CRC mismatch (computed 26a92edf wanted 7a008b73)
--2174--   Considering /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.19.so ..
--2174--   .. CRC is valid
--2174-- REDIR: 0x4ec4070 (libc.so.6:strcasecmp) redirected to 0x4a25720 (_vgnU_ifunc_wrapper)
--2174-- REDIR: 0x4ec6360 (libc.so.6:strncasecmp) redirected to 0x4a25720 (_vgnU_ifunc_wrapper)
--2174-- REDIR: 0x4ec3840 (libc.so.6:memcpy@GLIBC_2.2.5) redirected to 0x4a25720 (_vgnU_ifunc_wrapper)
--2174-- REDIR: 0x4ec1ad0 (libc.so.6:rindex) redirected to 0x4c2da30 (rindex)
--2174-- REDIR: 0x4eb9a80 (libc.so.6:malloc) redirected to 0x4c2ab10 (malloc)
--2174-- REDIR: 0x4ebfdd0 (libc.so.6:strlen) redirected to 0x4c2e0e0 (strlen)
--2174-- REDIR: 0x4ec8a40 (libc.so.6:memcpy@@GLIBC_2.14) redirected to 0x4a25720 (_vgnU_ifunc_wrapper)
--2174-- REDIR: 0x4ed1a30 (libc.so.6:__memcpy_sse2_unaligned) redirected to 0x4c2f6b0 (memcpy@@GLIBC_2.14)
--2174-- REDIR: 0xffffffffff600400 (???:???) redirected to 0x3807649d (???)
--2174-- REDIR: 0x4ecadd0 (libc.so.6:strchrnul) redirected to 0x4c319b0 (strchrnul)
--2174-- REDIR: 0x4ec38d0 (libc.so.6:memset) redirected to 0x4c31350 (memset)
--2174-- REDIR: 0x4eba120 (libc.so.6:free) redirected to 0x4c2bd80 (free)
--2174-- REDIR: 0x4ec8a90 (libc.so.6:__GI_memcpy) redirected to 0x4c2fc90 (__GI_memcpy)
--2174-- REDIR: 0x4ec2720 (libc.so.6:__GI_strstr) redirected to 0x4c32030 (__strstr_sse2)
--2174-- REDIR: 0x4ec32b0 (libc.so.6:__GI_memcmp) redirected to 0x4c30b80 (__GI_memcmp)
--2174-- REDIR: 0x4ebf850 (libc.so.6:__GI_strcpy) redirected to 0x4c2e2a0 (__GI_strcpy)
--2174-- REDIR: 0x4ebe3c0 (libc.so.6:__GI_strcmp) redirected to 0x4c2f200 (__GI_strcmp)
--2174-- REDIR: 0x4ec3f00 (libc.so.6:__GI_stpcpy) redirected to 0x4c30da0 (__GI_stpcpy)
--2174-- REDIR: 0x4ec3270 (libc.so.6:bcmp) redirected to 0x4a25720 (_vgnU_ifunc_wrapper)
--2174-- REDIR: 0x4f9a8e0 (libc.so.6:__memcmp_sse4_1) redirected to 0x4c30c00 (__memcmp_sse4_1)
--2174-- REDIR: 0x4f8a910 (libc.so.6:__memmove_ssse3_back) redirected to 0x4c2f450 (memcpy@GLIBC_2.2.5)
--2174-- REDIR: 0x4ec2f20 (libc.so.6:memchr) redirected to 0x4c2f390 (memchr)
--2174-- REDIR: 0x4ebe380 (libc.so.6:strcmp) redirected to 0x4a25720 (_vgnU_ifunc_wrapper)
--2174-- REDIR: 0x4f7aa80 (libc.so.6:__strcmp_ssse3) redirected to 0x4c2f1b0 (strcmp)
--2174-- REDIR: 0x4eba220 (libc.so.6:realloc) redirected to 0x4c2ce10 (realloc)
--2174-- REDIR: 0x4eba550 (libc.so.6:calloc) redirected to 0x4c2cbf0 (calloc)
==2174== Invalid read of size 1
==2174==    at 0x40302B: sdslen (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4030EF: dictSdsKeyCompare (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40A557: dictFind (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40320A: getTopic (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x402EB8: pop (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40239B: processInputBuffer (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4025DB: readQueryFromClient (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40622A: aeProcessEvents (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4063B4: aeMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x402A32: tcpServerRun (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4031E1: nsqdMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x403448: main (in /root/build/src/nsqd/nsqd.out)
==2174==  Address 0x5215ac0 is 0 bytes inside a block of size 7 free'd
==2174==    at 0x4C2BDEC: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==2174==    by 0x40726D: sdsfree (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x408CF2: sdsfreesplitres (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4023D8: processInputBuffer (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4025DB: readQueryFromClient (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40622A: aeProcessEvents (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4063B4: aeMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x402A32: tcpServerRun (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4031E1: nsqdMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x403448: main (in /root/build/src/nsqd/nsqd.out)
==2174== 
==2174== Invalid read of size 1
==2174==    at 0x4C30C0C: __memcmp_sse4_1 (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==2174==    by 0x40311A: dictSdsKeyCompare (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40A557: dictFind (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40320A: getTopic (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x402EB8: pop (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40239B: processInputBuffer (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4025DB: readQueryFromClient (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40622A: aeProcessEvents (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4063B4: aeMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x402A32: tcpServerRun (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4031E1: nsqdMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x403448: main (in /root/build/src/nsqd/nsqd.out)
==2174==  Address 0x5215ac1 is 1 bytes inside a block of size 7 free'd
==2174==    at 0x4C2BDEC: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==2174==    by 0x40726D: sdsfree (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x408CF2: sdsfreesplitres (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4023D8: processInputBuffer (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4025DB: readQueryFromClient (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40622A: aeProcessEvents (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4063B4: aeMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x402A32: tcpServerRun (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4031E1: nsqdMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x403448: main (in /root/build/src/nsqd/nsqd.out)
==2174== 
==2174== Invalid read of size 1
==2174==    at 0x4C30C25: __memcmp_sse4_1 (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==2174==    by 0x40311A: dictSdsKeyCompare (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40A557: dictFind (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40320A: getTopic (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x402EB8: pop (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40239B: processInputBuffer (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4025DB: readQueryFromClient (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40622A: aeProcessEvents (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4063B4: aeMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x402A32: tcpServerRun (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4031E1: nsqdMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x403448: main (in /root/build/src/nsqd/nsqd.out)
==2174==  Address 0x5215ac2 is 2 bytes inside a block of size 7 free'd
==2174==    at 0x4C2BDEC: free (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==2174==    by 0x40726D: sdsfree (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x408CF2: sdsfreesplitres (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4023D8: processInputBuffer (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4025DB: readQueryFromClient (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x40622A: aeProcessEvents (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4063B4: aeMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x402A32: tcpServerRun (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x4031E1: nsqdMain (in /root/build/src/nsqd/nsqd.out)
==2174==    by 0x403448: main (in /root/build/src/nsqd/nsqd.out)
==2174== 
